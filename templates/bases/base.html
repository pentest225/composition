<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Andrea - Free Bootstrap 4 Template by Colorlib</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Abril+Fatface&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/static/css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/animate.css">
    
    <link rel="stylesheet" href="/static/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/static/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="/static/css/magnific-popup.css">

    <link rel="stylesheet" href="/static/css/aos.css">

    <link rel="stylesheet" href="/static/css/ionicons.min.css">

    <link rel="stylesheet" href="/static/css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="/static/css/jquery.timepicker.css">

    
    <link rel="stylesheet" href="/static/css/flaticon.css">
    <link rel="stylesheet" href="/static/css/icomoon.css">
    <link rel="stylesheet" href="/static/css/style.css">

    
  </head>
  <body>

	<div id="colorlib-page">
    <a href="#" class="js-colorlib-nav-toggle colorlib-nav-toggle"><i></i></a>
    <div id="applic">
		<aside id="colorlib-aside" role="complementary" class="js-fullheight">
			<nav id="colorlib-main-menu" role="navigation">
				<ul>
					<li class="colorlib-active"><a href="index.html">Home</a></li>
					<li v-for="item in data_all_catArticle"><a href="fashion.html">${ item.node.nom }</a></li>
				</ul>
			</nav>

			<div class="colorlib-footer">
				<h1 id="colorlib-logo" class="mb-4"><a href="index.html" style="background-image: url(images/bg_1.jpg);">Andrea <span>Moore</span></a></h1>
				<div class="mb-4">
					<h3>Subscribe for newsletter</h3>
					<form action="#" class="colorlib-subscribe-form">
            <div class="form-group d-flex">
            	<div class="icon"><span class="icon-paper-plane"></span></div>
              <input type="text" class="form-control" placeholder="Enter Email Address">
            </div>
          </form>
				</div>
				<p class="pfooter"><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
	  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
	  <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
			</div>
    </aside> <!-- END COLORLIB-ASIDE -->
  </div>
    <div id="colorlib-main">
        {% block main %}
            
        {% endblock main %}
      </div><!-- END COLORLIB-MAIN -->
            
	</div><!-- END COLORLIB-PAGE -->

  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>


  <script src="/static/js/jquery.min.js"></script>
  <script src="/static/js/jquery-migrate-3.0.1.min.js"></script>
  <script src="/static/js/popper.min.js"></script>
  <script src="/static/js/bootstrap.min.js"></script>
  <script src="/static/js/jquery.easing.1.3.js"></script>
  <script src="/static/js/jquery.waypoints.min.js"></script>
  <script src="/static/js/jquery.stellar.min.js"></script>
  <script src="/static/js/owl.carousel.min.js"></script>
  <script src="/static/js/jquery.magnific-popup.min.js"></script>
  <script src="/static/js/aos.js"></script>
  <script src="/static/js/jquery.animateNumber.min.js"></script>
  <script src="/static/js/scrollax.min.js"></script>
  <!-- <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script> -->
  <!-- <script src="/static/js/google-map.js"></script> -->
  <script src="/static/js/main.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  
  {% block vue %}
    
  {% endblock vue %}
  <script>
      var app = new Vue({
          el: '#applic',
          data: {
              loader: true,
              base_url:"",
              email: '',
              data_all_category:[],
              data_all_catArticle:[],
              data_single_article:[],
              firstArticle:[],
              secondArticle:[],
              data_all_Article:[],
              data_all_Categorie:[],
              base_url:'',
          },
          delimiters: ["${","}"],
          mounted(){
              this.getdata()
              this.loader
          },
          methods: {
              /*sendregister: function(){
                  this.isregister=true;
                  axios.defaults.xsrfCookieName = 'csrftoken'
                  axios.defaults.xsrfHeaderName = 'X-CSRFToken'
                  axios.post('http://127.0.0.1:8000/post', {
                      email: '' + this.email,
                      }).then(response => {
                                  
                          console.log(response)
                          this.isregister=false;
                          this.result= response.data;
                          console.log(this.result.success)
                      })
                      .catch((err) => {
                          console.log(err);
                          this.isregister=false;
                      })
              },*/
              getdata: function(){
                  this.base_url = 'http://127.0.0.1:8000'
                  console.log('data getting')
                  axios.defaults.xsrfCookieName = 'csrftoken'
                  axios.defaults.xsrfHeaderName = 'X-CSRFToken'
                  
                  axios({
                      url: this.base_url+'/graphql',
                      method: 'post',
                      data: {
                          query: `
                          {
                            allCategorie {
                              edges {
                                node {
                                  id
                                  titreSlug
                                  status
                                  nom
                                  categoriearticle{
                                    edges{
                                      node{
                                        titre
                                        titreSlug
                                        dateAdd
                                        auteur{
                                          nom
                                        }
                                        categorie{
                                          nom
                                        }
                                        articletag{
                                          edges{
                                            node{
                                              nom
                                            }
                                          }
                                        }
                                        articlecommentaire{
                                          edges{
                                            node{
                                              message
                                            }
                                          }
                                        }
                                        image,
                                        description
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }                
                            
                          `
                      }
                  })
                  .then(response => {
                      result = response.data.data
                      this.data_all_catArticle = result.allCategorie.edges
                      //this.firstArticle = this.data_all_catArticle[0].node.categoriearticle.edges.slice(0,1)
                      //this.secondArticle = this.data_all_catArticle[0].node.categoriearticle.edges.slice(1, 5)
      
                      this.data_all_Article = result.allCategorie.edges[0].node.categoriearticle.edges
                      //this.data_all_Article2 = result.allArticles.edges.slice(0, 8)
                      console.log(this.data_all_Article)
                      console.log(this.data_all_catArticle,"okkokkokoko")
                      //console.log(this.data_all_Article2)
      
      
                      //console.log(this.firstArticle)
                      //console.log(this.data_all_catArticle)
                      this.loader = false
                  })
                  .catch((err) => {
                      console.log(err);
                  })
              },
              
          },
          
              
      })
      </script>
    
  </body>
</html>